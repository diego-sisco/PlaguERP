// toggleCity.js

function load_city(refId) {
    var select_state = document.getElementById("state_" + refId);
    var select_city = document.getElementById("city_" + refId);
    var state = select_state.value;
    var city = select_city.value; // Guarda la ciudad actualmente seleccionada, si la hubiera

    // Borra las opciones actuales de select_city
    select_city.innerHTML =
        '<option value="" selected disabled hidden>Selecciona un municipio</option>';
    if (state != "") {
        // Obt√©n las ciudades correspondientes al estado seleccionado
        var cities = citiesData[state];
        if (cities) {
            cities.forEach(function (c) {
                var option = document.createElement("option");
                option.text = c;
                option.value = c;
                select_city.appendChild(option);
            });
        }
    }

    // Restaura la ciudad seleccionada, si existe
    if (city) {
        select_city.value = city;
    }
}

document.addEventListener("DOMContentLoaded", function () {
    referencesData.forEach(function (reference) {
        var select_state = document.getElementById("state_" + reference.id);
        select_state.addEventListener("change", function () {
            load_city(reference.id);
        });
        load_city(reference.id);
    });
});
